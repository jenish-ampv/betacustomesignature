%%DEFINE_HEADER%%

<div class="new_dashboard_bg">
    <div class="container">
            <div class="new_dashboard_left">
                    %%DEFINE_SIDEBAR%%
                </div>
            <div class="new_dashboard_right google-workspace-page">
                %%DEFINE_Message%%              
                <div class="bulk_upload_main text-center %%DEFINE_bulkuploadcls%% %%DEFINE_azurestep1%%">
                    <div class="signature_integration_withhead_box step" id="step1">
                        <h2><img src="%%DEFINE_IMAGE_LINK%%/images/google-workspace-icon.svg" alt=""> Google Workspace</h2>
                        <div class="step_box">
                            <ul>
                            <li><span>1</span>Step</li>
                            <li><span>2</span>Step</li>
                            <li class="active"><span>3</span>Step</li>
                            </ul>
                        </div>
                        <div class="headbox_content">
                            <p>Specify which data you would like to import from Active Directory and match the data with the fields in your Master Signature.</p>
                            <p>&nbsp;</p>
                            <form id="mappingazure" method="post" action="" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>Master Singaute Field</h5>
                                        <h6 class="infotitle" style="text-align:left;">Personal Information</h6>
                                            %%DEFINE_master_fieldp%%
                                            <h6 class="infotitle"  style="text-align:left;">Contact Information</h6>
                                            %%DEFINE_master_fieldc%%
                                    </div>
                                
                                    <div class="col-md-6">
                                        <h5>Google Workspace Attributes</h5>
                                        <h6 class="infotitle">&nbsp;</h6>
                                        %%DEFINE_dirattr_fieldp%%
                                        <h6 class="infotitle">&nbsp;</h6>
                                        %%DEFINE_dirattr_fieldc%%
                                    </div>
                                    <input type="hidden" name="gsuite_savefield" value="1" />
                                    <div class="" style="margin-top:20px;"><button type="submit" name="next" class="submit btn next action-button" value="Next Step">Next <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""> </button></div>
                                </div> 
                            </form>
                        </div>
                    </div>
                </div>
                        
                        
                <div class="bulk_upload_main %%DEFINE_bulkuploadcls%% %%DEFINE_azurestep2%%">
                    <div class="signature_integration_withhead_box step" id="step1">
                        <h2>Google Workspace</h2>
                        <div class="headbox_content">
                            <p>Select Organization Unit</p>
                            <p>&nbsp;</p>
                            <form id="groupazure" method="post" action="" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5>Google Workspace Organisation Units</h5>
                                        <ul class="main">
                                            <li><input class="form-check-input" type="checkbox" id="select_all" name="selectall" value="1" /> <label for="select_all">Select All</label></li>
                                            <ul class="group_list">
                                            %%DEFINE_group_list%%
                                            </ul>
                                        </ul>
                                    </div>
                                    <input type="hidden" name="gsuite_group" value="1" />
                                    <div class="" style="margin-top:20px;"><button type="submit" name="next" class="submit btn next action-button" value="Next Step">Import <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""></button></div>
                                </div> 
                            </form>
                        </div>
                    </div>
                </div>
                        
                        
                <div class="bulk_upload_main text-center %%DEFINE_bulkerrorcls%%">
                    <h2><a href="%%DEFINE_linkModuleDashboard%%">please select your Master Signature <br /> For bulk upload</a></h2>
                    <p><a class="btn btn-primary" href="%%DEFINE_linkModuleDashboard%%">Dashboard <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""></a></p>
                    
                </div>
            </div>
        </div>	 	 
    </div>
</div>
    
    
 <!-- share Popup -->
 
 <div class="modal fade" id="success-importmodel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="border:none;">
	<!--    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>-->
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      	<div class="signature_ready_box">
        	<img src="%%DEFINE_IMAGE_LINK%%/images/success-msg.png" />
        	<h3>Congratulations!</h3>
        	<p>The signatures you requested have been generated successfully</p>
        </div>
      </div>
      <div class="modal-footer">
        <a href="javascript:void(0);" class="btn btn-primary" data-bs-toggle="modal" id="backreview" data-bs-target="#shareModalbulk">Share signature</a>
      </div>
    </div>
  </div>
</div>

<div class="modal fade sharemodal sharebulmodel" id="shareModalbulk" tabindex="-1" aria-labelledby="shareModalbulkLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header" style="border:none;">
             <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	  <h5 class="modal-title" id="exampleModalLabel">Share Signature</h5>
      <p>Enter email to share generated signature</p>
      <span id="sahre_msg"></span>
      <div class="border_bottom">
        	<div class="left"><span>Name on Signature</span></div>
            <div class="righ"><span>Enter email to share</span></div>
        </div>

      </div>
      <div class="modal-body">
      		<form id="bulkshare" enctype="multipart/form-data">
	  		%%DEFINE_signature_sharelists%%
            	<input type="hidden" name="bulkshare" value="_bulksahre" />
            </form>
            <a href="javascript:void(0);" class="btn btn-primary ajaxaction_share" id="sharesig" data-id="0" data-action="share">Share</a>   
      </div>
      
    </div>
  </div>
</div>
 <input type="hidden" id="form_url" value="%%DEFINE_bulkupload%%" />

<script src="%%DEFINE_JS_LINK%%/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#select_all').on('click',function(){
        if(this.checked){
            $('.groupcbox').each(function(){
                this.checked = true;
            });
        }else{
             $('.groupcbox').each(function(){
                this.checked = false;
            });
        }
    });
    
    $('.groupcbox').on('click',function(){
        if($('.groupcbox:checked').length == $('.groupcbox').length){
            $('#select_all').prop('checked',true);
        }else{
            $('#select_all').prop('checked',false);
        }
    });

    $('.select_all_department').on('click',function(){
        if(this.checked){
            department_id = $(this).data('department-id');
            $('.checkbox-'+department_id).each(function(){
                this.checked = true;
            });
        }else{
            $('.checkbox-'+department_id).each(function(){
                this.checked = false;
            });
        }
        if($('.groupcbox:checked').length == $('.groupcbox').length){
            $('#select_all').prop('checked',true);
        }else{
            $('#select_all').prop('checked',false);
        }
    });
    
    $(document).on('click', '[class*="checkbox-"]', function () {
        department_id = $(this).data('department-id');
        console.log(department_id)
        console.log($('.checkbox-'+department_id+':checked').length)
        console.log($('.checkbox-'+department_id).length)
        if($('.checkbox-'+department_id+':checked').length == $('.checkbox-'+department_id).length){
            $('#select_all_'+department_id).prop('checked',true);
        }else{
            $('#select_all_'+department_id).prop('checked',false);
        }
    });
});
</script>
 
IF("%%DEFINE_success_popup%%" == "1"){ 
<script>
$(document).ready(function(){
    $("#success-importmodel").modal('show'); // show success message

	$('.ajaxaction_share').on( "click", function() {
		var form = $('#bulkshare');
		var formdata = form.serialize();
			$.ajax({
			type: 'POST',
			url: $('#form_url').val(),
			data:  formdata,
			dataType:'json',
			}).done(function(data) {
				$('#sahre_msg').html(data.msg);
				 $("#shareModalbulk").modal('hide');
			// Optionally alert the user of success here...
			}).fail(function(data) {
				return false;
			// Optionally alert the user of an error here...
			});
			return false;
	});		
});
	

</script>
{:IF}
<script>
    jQuery.noConflict();
    (function($) {
      // To active/inactive in leftbar
      $('.new_dashboard_left a').removeClass('active');
      $('.new_dashboard_left .integrations').addClass('active');
    })(jQuery);
</script>
%%DEFINE_FOOTER%%