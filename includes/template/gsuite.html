%%DEFINE_HEADER%%
<div class="flex grow flex-col in-data-kt-[sticky-header=on]:pt-(--header-height-default) overflow-auto">
    %%DEFINE_SIDEBAR%%
    %%DEFINE_Message%%
    <main class="grow" id="content" role="content">
        <div class="kt-container-fluid pb-4">
            <div class="w-full max-w-[800px] mx-auto %%DEFINE_bulkuploadcls%% %%DEFINE_azurestep1%%">
                <div class="kt-card kt-card-accent step" id="step1">
                    <div class="kt-card-header">
                        <h2 class="kt-card-title flex items-center gap-2">
                            <img src="%%DEFINE_IMAGE_LINK%%/images/google-workspace-icon.svg" alt="">
                            Google Workspace
                        </h2>
                    </div>
                    <div class="kt-card-content">
                        <div class="flex items-center gap-4">
                            <div class="text-gray-950 flex items-center gap-3">
                                <span
                                    class="flex-none flex items-center justify-center rounded-lg size-8 bg-gray-950 text-white">1</span>
                                Step
                            </div>
                            <div class="text-gray-200 flex items-center gap-3">
                                <span
                                    class="flex-none flex items-center justify-center rounded-lg size-8 bg-gray-200 text-white">2</span>
                                Step
                            </div>
                        </div>
                        <p class="my-3">Specify which data you would like to import from Active Directory and match the
                            data with the fields in your Master Signature.</p>
                        <form id="mappingazure" method="post" action="" enctype="multipart/form-data">
                            <div class="grid gap-5 grid-cols-1 lg:grid-cols-2">
                                <div class="kt-card kt-card-accent">
                                    <div class="kt-card-header">
                                        <div class="kt-card-heading">
                                            <h2 class="kt-card-title">Master Signature Field</h2>
                                        </div>
                                    </div>
                                    <div class="kt-card-content">
                                        <h6 class="font-semibold text-xl mb-2">Personal Information</h6>
                                        <div class="space-y-2">
                                            %%DEFINE_master_fieldp%%
                                        </div>
                                        <h6 class="font-semibold text-xl mt-5 mb-2">Contact Information</h6>
                                        <div class="space-y-2">
                                            %%DEFINE_master_fieldc%%
                                        </div>
                                    </div>
                                </div>
                                <div class="kt-card kt-card-accent">
                                    <div class="kt-card-header">
                                        <div class="kt-card-heading">
                                            <h2 class="kt-card-title">Google Workspace Attributes</h2>
                                        </div>
                                    </div>
                                    <div class="kt-card-content">
                                        <div class="space-y-2">
                                            %%DEFINE_dirattr_fieldp%%
                                            %%DEFINE_dirattr_fieldc%%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" name="gsuite_savefield" value="1" />
                            <div class="text-center mt-4">
                                <button type="submit" name="next"
                                    class="submit kt-btn kt-btn-primary next action-button" value="Next Step">
                                    Next
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="w-full max-w-[800px] mx-auto %%DEFINE_bulkuploadcls%% %%DEFINE_azurestep2%%">
                <div class="kt-card kt-card-accent step" id="step1">
                    <div class="kt-card-header">
                        <h2 class="kt-card-title flex items-center gap-2">
                            <span>Google Workspace</span>
                        </h2>
                    </div>

                    <div class="kt-card-content">
                        <p>Select Organization Unit</p>
                        <form id="groupazure" method="post" action="" enctype="multipart/form-data">
                            <div class="flex items-center justify-between flex-wrap">
                                <p class="font-semibold">Google Workspace Organisation Units</p>
                                <div class="flex items-center gap-2">
                                    <input class="kt-checkbox kt-checkbox-sm" type="checkbox" id="select_all"
                                        name="selectall" value="1" />
                                    <label class="kt-label" for="select_all">Select All</label>
                                </div>
                            </div>
                            <ul class="group_list">
                                %%DEFINE_group_list%%
                            </ul>
                            <input type="hidden" name="gsuite_group" value="1" />
                            <div class="text-center mt-4">
                                <button type="submit" name="next"
                                    class="submit kt-btn kt-btn-primary next action-button" value="Next Step">Import
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="text-center %%DEFINE_bulkerrorcls%%">
                    <h2><a href="%%DEFINE_linkModuleDashboard%%">please select your Master Signature <br /> For bulk
                            upload</a></h2>
                    <p><a class="btn btn-primary" href="%%DEFINE_linkModuleDashboard%%">Dashboard <img
                                src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""></a></p>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- <div class="modal fade" id="success-importmodel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="border:none;">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      	<div class="signature_ready_box">
        	<img src="%%DEFINE_IMAGE_LINK%%/images/success-msg.png" />
        	<h3>Congratulations!</h3>
        	<p>The signatures you requested have been generated successfully</p>
        </div>
      </div>
      <div class="modal-footer">
        <a href="javascript:void(0);" class="btn btn-primary" data-bs-toggle="modal" id="backreview" data-bs-target="#shareModalbulk">Share signature</a>
      </div>
    </div>
  </div>
</div>

<div class="modal fade sharemodal sharebulmodel" id="shareModalbulk" tabindex="-1" aria-labelledby="shareModalbulkLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header" style="border:none;">
             <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	  <h5 class="modal-title" id="exampleModalLabel">Share Signature</h5>
      <p>Enter email to share generated signature</p>
      <span id="sahre_msg"></span>
      <div class="border_bottom">
        	<div class="left"><span>Name on Signature</span></div>
            <div class="righ"><span>Enter email to share</span></div>
        </div>

      </div>
      <div class="modal-body">
      		<form id="bulkshare" enctype="multipart/form-data">
	  		%%DEFINE_signature_sharelists%%
            	<input type="hidden" name="bulkshare" value="_bulksahre" />
            </form>
            <a href="javascript:void(0);" class="btn btn-primary ajaxaction_share" id="sharesig" data-id="0" data-action="share">Share</a>   
      </div>
      
    </div>
  </div>
</div> -->

<input type="hidden" id="form_url" value="%%DEFINE_bulkupload%%" />

<script src="%%DEFINE_JS_LINK%%/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#select_all').on('click', function () {
            if (this.checked) {
                $('.groupcbox').each(function () {
                    this.checked = true;
                });
            } else {
                $('.groupcbox').each(function () {
                    this.checked = false;
                });
            }
        });

        $('.groupcbox').on('click', function () {
            if ($('.groupcbox:checked').length == $('.groupcbox').length) {
                $('#select_all').prop('checked', true);
            } else {
                $('#select_all').prop('checked', false);
            }
        });

        $('.select_all_department').on('click', function () {
            if (this.checked) {
                department_id = $(this).data('department-id');
                $('.checkbox-' + department_id).each(function () {
                    this.checked = true;
                });
            } else {
                $('.checkbox-' + department_id).each(function () {
                    this.checked = false;
                });
            }
            if ($('.groupcbox:checked').length == $('.groupcbox').length) {
                $('#select_all').prop('checked', true);
            } else {
                $('#select_all').prop('checked', false);
            }
        });

        $(document).on('click', '[class*="checkbox-"]', function () {
            department_id = $(this).data('department-id');
            console.log(department_id)
            console.log($('.checkbox-' + department_id + ':checked').length)
            console.log($('.checkbox-' + department_id).length)
            if ($('.checkbox-' + department_id + ':checked').length == $('.checkbox-' + department_id).length) {
                $('#select_all_' + department_id).prop('checked', true);
            } else {
                $('#select_all_' + department_id).prop('checked', false);
            }
        });
    });
</script>

<!-- IF("%%DEFINE_success_popup%%" == "1"){
<script>
    $(document).ready(function () {
        $("#success-importmodel").modal('show');

        $('.ajaxaction_share').on("click", function () {
            var form = $('#bulkshare');
            var formdata = form.serialize();
            $.ajax({
                type: 'POST',
                url: $('#form_url').val(),
                data: formdata,
                dataType: 'json',
            }).done(function (data) {
                $('#sahre_msg').html(data.msg);
                $("#shareModalbulk").modal('hide');
            }).fail(function (data) {
                return false;
            });
            return false;
        });
    });
</script>
{:IF} -->
<script>
    jQuery.noConflict();
    (function ($) {
        // To active/inactive in leftbar
        $('.new_dashboard_left a').removeClass('active');
        $('.new_dashboard_left .integrations').addClass('active');
    })(jQuery);
</script>
%%DEFINE_FOOTER%%