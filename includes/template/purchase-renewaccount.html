%%DEFINE_HEADER%%
<style>
  .header_bg .icon_right_side a.tutorial {
    display: none;
  }
</style>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="https://js.stripe.com/v3/"></script>

<div class="flex grow flex-col in-data-kt-[sticky-header=on]:pt-(--header-height-default) overflow-auto">
  <main class="h-full" id="content" role="content">
    <div class="kt-container-fluid p-4 h-full">
      <form action="" id="registerForm" method="post" data-rewardful>
        %%DEFINE_Message%%
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-8 xl:gap-10">
          <a href="%%DEFINE_ROOT_LINK%%/dashboard" class="kt-btn kt-btn-secondary kt-btn-icon absolute top-2 right-2">
            <i class="hgi hgi-stroke hgi-cancel-01"></i>
          </a>
          <div id="selectplan-main" class="bg-gray-100 border border-gray-300 p-5 rounded-4xl" style="display:block;">
            <div class="flex flex-wrap items-center justify-between mb-3 sm:mb-4 md:mb-5 lg:mb-6 xl:mb-8 2xl:mb-10">
              <div>
                <h4 class="font-bold">Start Your <span
                    class="bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent">7-day Free
                    Trial!</span></h4>
                <h5>Choose Your Plan</h5>
                <p class="bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent">Cancel Anytime</p>
              </div>
              <div class="flex items-center gap-2">
                <div class="flex items-center gap-2">
                  <span id="nav-tabs-monthly">Monthly</span>
                  <input class="kt-switch" type="checkbox" role="switch" id="plan_type" name="checkbox" checked>
                </div>
                <div class="flex items-center gap-2">
                  <span>Yearly</span>
                  <span class="kt-badge rounded-full bg-gradient-to-r from-[#26B7FF]/10 to-[#1D4AFE]/10">Save 20%</span>
                </div>
              </div>
            </div>
            <p>How many signatures do you need?</p>
            <div class="kt-card mt-3">
              <div class="kt-card-content">
                <input type="hidden" id="plan_unit" name="plan_unit" value="%%DEFINE_plan_selunit%%" />
                <div id="range" class="noUi-target noUi-ltr noUi-horizontal"></div>
                <div class="lg:flex justify-between mt-5 hidden">
                  <span class="rno active" id="rno1">1</span>
                  <span class="rno" id="rno3">3</span>
                  <span class="rno" id="rno5">5</span>
                  <span class="rno" id="rno10">10</span>
                  <span class="rno" id="rno15">15</span>
                  <span class="rno" id="rno20">20</span>
                  <span class="rno" id="rno25">25</span>
                  <span class="rno" id="rno30">30</span>
                  <span class="rno" id="rno35">35</span>
                  <span class="rno" id="rno40">40</span>
                  <span class="rno" id="rno45">45</span>
                  <span class="rno" id="rno50">50</span>
                  <span class="rno" id="rno55">55</span>
                  <span class="rno" id="rno60">60</span>
                  <span class="rno" id="rno65">65</span>
                  <span class="rno" id="rno70">70</span>
                  <span class="rno" id="rno75">75</span>
                  <span class="rno" id="rno80">80</span>
                  <span class="rno" id="rno85">85</span>
                  <span class="rno" id="rno90">90</span>
                  <span class="rno" id="rno95">95</span>
                  <span class="rno" id="rno100">100</span>
                </div>
              </div>
            </div>
            <div class="hidden" id="monthly-tab-panel">
              <input type="radio" name="plan_id" id="plan_id2" data-section="monthly" class="hidden imgbgchk" value="2"
                required="required" %%DEFINE_plan_selplan2%%>
              <label for="plan_id2" class="changeprice" data-price="20">
                <div class="order_details_box border-price">
                  <h5>Pro Plan</h5><span class="offper_box"><span>Change to yearly, save 20%</span></span> <b>$<span
                      class="month_proprice cprice">15</span>/mo </b></h6>
                  <div class="text_price">
                    <span class="no_employee_qarter">5</span> Signature <div class="monthprice" style="display:none;">
                      $<span class="month_propricespl cpricespl">60</span> USD </div>
                  </div>
                  <ul>
                    <li><b>Interactive Signature</b></li>
                    <li>AI - Logo Animation™</li>
                    <li>Remove CES Watermark</li>
                    <li>Team Dashboard</sup></li>
                    <li>Interactive Social Icons</li>
                    <li>Animated Profile</li>

                  </ul>
                  <ul>
                    <li>Verification Badge<img class="mt-1" src="%%DEFINE_IMAGE_LINK%%/images/verification-badge1.svg" alt=""></li>
                    <li>Pro Templates</li>
                    <li>Team Dashboard</li>
                    <li>Outlook and Gmail Sync<img class="mt-1" src="%%DEFINE_IMAGE_LINK%%/images/gmail-icon1.svg" alt=""><img
                        class="mt-1" src="%%DEFINE_IMAGE_LINK%%/images/outlook-icon1.svg" alt=""></li>
                    <li class="right">Instant Load Speed</li>
                  </ul>
                </div>
                <div class="tick_container">
                  <div class="tick">
                    <img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt="">
                  </div>
                </div>
              </label>
            </div>
            <div id="yearly-tab-panel" class="kt-card mt-5">
              <div class="kt-card-content">
                <input type="radio" name="plan_id" id="plan_id4" data-section="yearly" class="hidden imgbgchk" value="4" required="required" %%DEFINE_plan_selplan4%%>
                <label for="plan_id4" class="changeprice" data-price="20">
                  <h5>Pro Plan</h5>
                  <p><span class="no_employee_qarter">5</span> Signature</p>
                  <div class="yearprice" style="display:none;">
                    $<span class="year_propricespl cpricespl">60</span> USD
                  </div>
                  <p class="bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent">14-Day Risk-Free Guarantee</p>
                  <p class="line-through font-bold text-gray-500 mt-4 sm:mt-5 md:mt-6 lg:mt-7 xl:mt-10">$ 30</p>
                  <div class="flex items-end gap-3">
                    <h2>$15</h2>
                    <span class="kt-badge bg-[#B7FFD3] mb-2 rounded-full">First Month 50% OFF</span>
                  </div>
                  <p class="text-gray-400 my-1">Billed Annualy</p>
                  <p class="text-gray-400">Full animation features with advanced layouts, interactive icons, team management and auto-deployment.</p>
                  <div class="grid grid-cols-1 md:grid-cols-2 mt-6 pt-6 border-t border-t-gray-200 gap-2">
                    <ul class="space-y-2">
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Interactive Signature</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>AI - Logo Animation™</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Remove CES Watermark</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Team Dashboard</sup></li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Interactive Social Icons</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Animated Profile</li>
                    </ul>
                    <ul class="space-y-2">
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Verification Badge <img class="mt-0.5" src="%%DEFINE_IMAGE_LINK%%/images/verification-badge1.svg" alt=""></li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Pro Templates</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Team Dashboard</li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Outlook and Gmail Sync <img class="mt-0.5" src="%%DEFINE_IMAGE_LINK%%/images/gmail-icon1.svg" alt="">
                        <img class="mt-0.5" src="%%DEFINE_IMAGE_LINK%%/images/outlook-icon1.svg" alt=""></li>
                      <li class="gap-1 flex items-start"><i class="hgi hgi-stroke hgi-tick-02 bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent text-lg"></i>Instant Load Speed</li>
                    </ul>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <div class="space-y-4 pb-4">
            <div>
              <h5 class="mb-3">Renew Account</h5>
              <div class="space-y-2">
                <div>
                  <label class="kt-form-label">Enter Email</label>
                  <input type="email" class="kt-input" value="%%DEFINE_RENEW_PAYMENT_USER_EMAIL%%" id="user_email"
                    placeholder="Enter Email" disabled>
                </div>
                <div>
                  <label class="kt-form-label">Full Name</label>
                  <input type="text" class="kt-input" value="%%DEFINE_RENEW_PAYMENT_USER_NAME%%" id="user_name"
                    placeholder="Full Name" disabled>
                </div>
                <div class="hidden">
                  <label class="kt-form-label">User ID</label>
                  <input type="text" class="kt-input" value="%%DEFINE_RENEW_PAYMENT_USER_ID%%" id="user_id"
                    placeholder="User ID" disabled>
                </div>
              </div>
            </div>
            <div>
              <div class="flex flex-wrap items-center justify-between mb-3">
                <h5>Payment Method</h5>
                <div class="flex items-center gap-2">
                  <label class="kt-label">Use saved payment details</label>
                  <input class="kt-switch" type="checkbox" name="user_payment" id="user_payment" checked>
                </div>
              </div>
              <input type="hidden" name="user_saved_card" id="user_saved_card">
              <div id="card_section" style="display: none;">
                <div>
                  <label class="kt-form-label">Name on Card</label>
                  <input type="text" class="kt-input" name="user_nameoncard" value="%%DEFINE_user_nameoncard%%"
                    id="card_name" placeholder="Name on Card">
                </div>
                <div id="paymentResponse"></div>
                <div class="mt-4 form-floating card_info">
                  <label class="kt-form-label">Card Number *</label>
                  <div id="card-element"></div>
                </div>
              </div>
            </div>
            <div id="order-main">
              <label class="kt-form-label">Discount Code</label>
              <div class="flex gap-2">
                <input type="text" id="promo_code" class="kt-input" id="" placeholder="">
                <input type="hidden" id="coupon_id" name="coupon_id" value="" />
                <button type="button" class="kt-btn kt-btn-primary applied" id="apply_promocode">APPLY NOW</button>
                <button type="button" class="kt-btn kt-btn-icon kt-btn-destructive applied hidden" id="applied_promocode">
                  <i class="hgi hgi-stroke hgi-delete-02"></i>
                </button>
              </div>
              <p class="special_offet" id="couponResponse"></p>
            </div>
            <div>
              <h5 class="mb-3">Order Summary</h5>
              <div class="border border-gray-200 rounded-2xl p-4 space-y-3 text-gray-400">
                <div class="flex items-center justify-between">
                  <span>Subtotal</span>
                  <span id="subtotal">%%DEFINE_plan_format_pricespl%% USD</span>
                </div>
                <div class="flex items-center justify-between">
                  <span>Discount</span>
                  <span id="discount">$0 USD</span>
                </div>
                <div class="flex items-center justify-between text-primary">
                  <span>Total Savings</span>
                  <span id="savings">%%DEFINE_plan_format_savings%% USD</span>
                </div>
                <div class="flex items-center justify-between text-gray-950 text-xl font-semibold border-t border-t-gray-200 pt-4 mt-4">
                  <span>Total %%DEFINE_freetrialtext%%</span>
                  <span class="total" id="total">%%DEFINE_plan_format_price%% USD</span>
                </div>
              </div>
              <input type="hidden" name="totalpay" id="totalpay" value="%%DEFINE_plan_price_hiden%%" />
            </div>
            <div class="flex flex-col justify-center gap-2 mt-4">
              <input type="hidden" name="registersubmit" value="1" />
              <button type="submit" name="signin" class="kt-btn kt-btn-primary w-full" id="renew_button">Start 7-day trial</button>
              <p class="text-center text-gray-300">Cancel Anytime</p>
            </div>
          </div>
        </div>
      </form>
      <input type="hidden" id="ajax_url" value="%%DEFINE_linkModuleRegister%%" />
    </div>
  </main>
</div>

  <!-- pricing plan change based on slider -->
  <script src="%%DEFINE_JS_LINK%%/jquery-3.5.1.min.js"></script>
  <script src="%%DEFINE_JS_LINK%%/nouislider/nouislider.min.js"></script>
  <script>
    $(document).ready(function () {
      setTimeout(function () { $('.alert').remove(); }, 3000);
      // Listen for changes on the checkbox
      $('#user_payment').change(function () {
        if ($(this).is(':checked')) {
          $('#card_section').slideUp();    // Hide with animation
        } else {
          $('#card_section').slideDown();  // Show with animation
        }
      });
    });
  </script>
  <script type="text/javascript">
    jQuery.noConflict();
    (function ($) {
      if ($('input[name="plan_id"]:checked').length === 0) {
        $("#yearly-tab-panel").removeClass('hidden');
        $("#monthly-tab-panel").addClass('hidden');
        $("#plan_id4").prop('checked', true);
        $("#form_plan_id").val(8);
      } else {
        if ($('input[name="plan_id"]:checked').data('section') == 'monthly') {
          $('#plan_type').prop('checked', false);
          $("#monthly-tab-panel").removeClass('hidden');
          $("#yearly-tab-panel").addClass('hidden');
          $("#plan_id2").prop('checked', true);
          $("#form_plan_id").val(7);
        } else {
          $('#plan_type').prop('checked', true);
          $("#yearly-tab-panel").removeClass('hidden');
          $("#monthly-tab-panel").addClass('hidden');
          $("#plan_id4").prop('checked', true);
          $("#form_plan_id").val(8);
        }
      }
      $(document).ready(function () {
        $('#plan_type').on('change', function () {
          if ($(this).is(':checked')) {
            $("#yearly-tab-panel").removeClass('hidden');
            $("#monthly-tab-panel").addClass('hidden');
            $("#plan_id4").prop('checked', true);
            $("#form_plan_id").val(8);
          } else {
            $("#month-tab").click();
            $("#monthly-tab-panel").removeClass('hidden');
            $("#yearly-tab-panel").addClass('hidden');
            $("#plan_id2").prop('checked', true);
            $("#form_plan_id").val(7);
          }
          updateSelectPlan();
        });
      });
    })(jQuery);
  </script>
  <script>
    var quartlyEnabled = %%DEFINE_quartrly_enabled%%;
    function updateSelectPlan() {

      // if(isFreeTrial){
      //   return false;
      // }
      if (quartlyEnabled) {
        $("#nav-tabs-monthly").text("Quarterly");
      }
      if ($('input[name=plan_id]:checked').val() < 3) {
        multiplyprice = 1;
        if (quartlyEnabled) {
          multiplyprice = 3;
        }
      } else {
        multiplyprice = 12;
      }
      var radioObj = $('input[name=plan_id]:checked');
      planpriceint = parseFloat(radioObj.parent().find('label span.cprice').text() * multiplyprice);
      planpricesplint = parseFloat(radioObj.parent().find('label span.cpricespl').text() * multiplyprice);
      totalsavings = parseFloat(planpricesplint - planpriceint);
      $('#subtotal').text('$' + planpricesplint.toFixed(2) + ' USD');
      $('#savings').text('$' + totalsavings.toFixed(2) + ' USD');
      $('#total').text('$' + planpriceint.toFixed(2) + ' USD');
      // $('#selectplan-main').toggle();
      // $('#order-main').toggle();
      //for discount calcultion
      $('#totalpay').val(planpriceint);

      $('#coupon_id').val('');
      $('#promo_code').val('');
      $('#couponResponse').text('');
      $('#discount').text('$0.00 USD');
      $("#apply_promocode").removeClass('hidden');
      $("#applied_promocode").addClass('hidden');
    };


    start = $('#plan_unit').val();
    var rangeSlider = $('#range')[0];
    noUiSlider.create(rangeSlider, {
      start: [start],
      behaviour: 'tap', //drag
      step: 5,
      connect: [true, false],
      range: {
        'min': [1],
        '4%': [3, 2],
        '7%': [5, 5],
        'max': [100]
      }
    });

    rangeSlider.noUiSlider.on('update', function (values, handle, unencoded) {
      //if(unencoded == 0 ) {unencoded = $('#plan_unit').val();}
      //  if(unencoded == 0 ) {unencoded = 1;}
      //  if( unencoded == '39.99999999999999') { unencoded = 40;}
      //  if( unencoded == '74') { unencoded = 75;}
      //  unencoded = unencoded.slice(0, 2);
      unencoded = values;
      unencoded = parseInt(unencoded);
      if (unencoded == 0) { unencoded = [1]; }
      $("#form_plan_unit").val(unencoded);

      $('#plan_unit').val(unencoded);
      $('.no_employee_qarter').text(unencoded);
      // month price changhe
      var pro_month_unit = JSON.parse('%%DEFINE_pro_month_unit%%');
      var pro_month_unitspl = JSON.parse('%%DEFINE_pro_month_unitspl%%');
      $('.month_proprice').text(pro_month_unit[unencoded]);
      $('.month_propricespl').text(pro_month_unitspl[unencoded]);
      // year price changhe
      var pro_year_unit = JSON.parse('%%DEFINE_pro_year_unit%%');
      var pro_year_unitspl = JSON.parse('%%DEFINE_pro_year_unitspl%%');
      $('.year_proprice').text(pro_year_unit[unencoded]);
      $('.year_propricespl').text(pro_year_unitspl[unencoded]);
      var radioObj = $('input[name=plan_id]:checked');
      if ($('input[name=plan_id]:checked').val() < 3) {
        multiplyprice = 1;
        if (quartlyEnabled) {
          multiplyprice = 3;
        }
      } else {
        multiplyprice = 12;
      }
      planpriceint = parseFloat(radioObj.parent().find('label span.cprice').text() * multiplyprice);

      $(".rno").removeClass("active");
      $("#rno" + unencoded).addClass("active");

      updateSelectPlan();
    });

    $(document).ready(function () {
      $("input[name$='plan_type']").click(function () {
        var tab = $(this).val();
        if (tab == 'quarter') {
          $('#plan_id2').prop('checked', true);
          $('#tab_quarter').css('display', 'inline');
          $('#tab_year').css('display', 'none');
          $('.yearly_save').removeClass('hidden');
        } else {
          $('#plan_id4').prop('checked', true);
          $('#tab_quarter').css('display', 'none');
          $('#tab_year').css('display', 'inline');
          $('.yearly_save').addClass('hidden');
        }
      });
    });

    // chek plan coupon is valid

    $(document).ready(function () {
      $("#apply_promocode").click(function () {
        $('#paymentResponse').html('');
        $('#coupon_id').val('');
        var promo_code = $('#promo_code');
        if (promo_code.val() == "") {
          promo_code.focus(); return false;
        } else {
          var url = $('#ajax_url').val();
          jQuery.ajax({
            url: url,
            data: 'coupon_apply=1&coupon_code=' + promo_code.val(),
            type: "POST",
            dataType: "json",
            async: false,
            success: function (data) {
              if (data['coupon_id'] != 0) {
                $('#coupon_id').val(data['coupon_id']);

                totalValue = $('#totalpay').val();
                if (data['coupon_type'] == 'per') {
                  discount = ((totalValue * data['coupon_amount']) / 100).toFixed(2);
                  totalpay = (totalValue - discount).toFixed(2);
                } else {
                  discount = (data['coupon_amount']).toFixed(2);
                  totalpay = (totalValue - discount).toFixed(2);
                }
                $('#discount').text('$' + discount + ' USD');
                $('#total').text('$' + totalpay + ' USD');
                $("#apply_promocode").addClass('hidden');
                $("#applied_promocode").removeClass('hidden');
              }
              $('#couponResponse').html(data['msg']);
            },
            error: function () {
              clearconsole();
            }
          });
        }
      });

      $("#applied_promocode").click(function () {
        $('#coupon_id').val('');
        $('#promo_code').val('');
        totalPay = $('#totalpay').val();
        totalPay = parseFloat(totalPay).toFixed(2);
        $('#discount').text('$0 USD');
        $('#total').text('$' + totalPay + ' USD');
        $('#couponResponse').html('<span style="color:#F00;">Discount code removed!</span>');
        $("#apply_promocode").removeClass('hidden');
        $("#applied_promocode").addClass('hidden');
      })
    });

  </script>
  <!-- end pricing plan change based on slider -->


  <script>
    // Create an instance of the Stripe object
    // Set your publishable API key
    var stripe = Stripe('%%DEFINE_STRIPE_PUBLISHABLE_KEY%%');

    // Create an instance of elements
    var elements = stripe.elements();
    var style = {
      base: {
        color: "#32325d",
        fontFamily: 'Roboto, sans-serif',
        fontSmoothing: "antialiased",
        fontSize: "13px",
        "::placeholder": {
          color: "#32325d"
        }
      },
      invalid: {
        fontFamily: 'Arial, sans-serif',
        color: "#fa755a",
        iconColor: "#fa755a"
      }
    };

    var cardElement = elements.create("card", { hidePostalCode: true, style: style });
    // Stripe injects an iframe into the DOM
    cardElement.mount("#card-element");

    // Validate input of the card elements
    var resultContainer = document.getElementById('paymentResponse');
    cardElement.addEventListener('change', function (event) {
      if (event.error) {
        resultContainer.innerHTML = '<p style="color:#F00;">' + event.error.message + '</p>';
      } else {
        resultContainer.innerHTML = '';
      }
    });
    // Get payment form element
    var form = document.getElementById('registerForm');

    // Create a token when the form is submitted.
    form.addEventListener('submit', function (e) {
      $("#renew_button").prop('disabled', true);
      $("#renew_button").html('Processing...');
      $("#renew_button").addClass('spinner');
      // $('button[name=signin]').attr('disabled',true);
      e.preventDefault();
      if ($("#user_payment").is(':checked')) {
        var hiddenInput = document.createElement('input');
        hiddenInput.setAttribute('type', 'hidden');
        hiddenInput.setAttribute('name', 'useSavedCard');
        hiddenInput.setAttribute('value', true);
        form.appendChild(hiddenInput);
        form.submit();
      } else {
        createToken();
      }
      return false;
    });

    // Create single-use token to charge the user
    function createToken() {
      var card_name = document.getElementById('card_name').value;
      stripe.createToken(cardElement, { name: card_name }).then(function (result) {
        if (result.error) {
          // Inform the user if there was an error
          // $('button[name=signin]').attr('disabled',false);
          $("#renew_button").prop('disabled', false);
          $("#renew_button").html('Renew Account <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt="">');
          $("#renew_button").removeClass('spinner');
          resultContainer.innerHTML = '<p style="color:#F00;">' + result.error.message + '</p>';
        } else {
          // Send the token to your server
          stripeTokenHandler(result.token);
        }
      });
    }

    // Callback to handle the response from stripe
    function stripeTokenHandler(token) {
      // Insert the token ID into the form so it gets submitted to the server
      var hiddenInput = document.createElement('input');
      hiddenInput.setAttribute('type', 'hidden');
      hiddenInput.setAttribute('name', 'stripeToken');
      hiddenInput.setAttribute('value', token.id);
      form.appendChild(hiddenInput);
      // Submit the form
      form.submit();
    }
  </script>
  <script>
    function handleCredentialResponse(response) {
      // decodeJwtResponse() is a custom function defined by you
      // to decode the credential response.
      var responsePayload = parseJwt(response.credential);
      // console.log(responsePayload.email_verified);
      document.getElementById('user_firstname').value = responsePayload.given_name + ' ' + responsePayload.family_name;
      //document.getElementById('user_lastname').value = responsePayload.family_name;
      document.getElementById('user_email').value = responsePayload.email;
      document.getElementById("passField").style.display = "none";
      document.getElementById("user_password").value = 'google';

      var hiddenInput = document.createElement('input');
      hiddenInput.setAttribute('type', 'hidden');
      hiddenInput.setAttribute('name', 'user_googleid');
      hiddenInput.setAttribute('value', responsePayload.sub);
      form.appendChild(hiddenInput);

      var hiddenInput = document.createElement('input');
      hiddenInput.setAttribute('type', 'hidden');
      hiddenInput.setAttribute('name', 'user_image');
      hiddenInput.setAttribute('value', responsePayload.picture);
      form.appendChild(hiddenInput);

    }

    function parseJwt(token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      return JSON.parse(jsonPayload);
    };
  </script>


  %%DEFINE_FOOTER%%