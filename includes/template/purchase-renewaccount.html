%%DEFINE_HEADER%%
<style>
  .header_bg .icon_right_side a.tutorial{ display: none;}
</style>
<section>
<script src="https://accounts.google.com/gsi/client" async defer></script> 
<script src="https://js.stripe.com/v3/"></script>
<div class="container">
  <form action="" id="registerForm" method="post" data-rewardful style="padding:20px 0;">
    <div class="grid grid-cols-1 md:grid-cols-2">
      %%DEFINE_Message%%
      <div>
        <div id="selectplan-main" class="bg-gray-100 border-2 border-gray-300 p-5 rounded-4xl" style="display:block;">
            <h4 class="font-bold">Start Your <span class="bg-gradient-to-r from-[#26B7FF] to-[#1D4AFE] bg-clip-text text-transparent">7-day Free Trial!</span></h4>
            <h5>Choose Your Plan</h5>
            <div class="flex items-center gap-2">
              <div class="flex items-center gap-2">
                <span id="nav-tabs-monthly">Monthly</span>
                <input class="kt-switch" type="checkbox" role="switch" id="plan_type" name="checkbox" checked>
              </div>
              <div class="flex items-center gap-2">
                <span>Yearly</span>
                <span class="kt-badge rounded-full bg-gradient-to-r from-[#26B7FF]/10 to-[#1D4AFE]/10">Save 20%</span>
              </div>
            </div>

            <div class="no_of_signatures">
              <p>How many signatures do you need?</p>
                <input type="hidden" id="plan_unit" name="plan_unit" value="%%DEFINE_plan_selunit%%" />
            </div>
            <div class="range_slider">
              <div id="range" class="noUi-target noUi-ltr noUi-horizontal"></div>
              <div class="range_text">
                <span class="rno active" id="rno1">1</span>
                <span class="rno" id="rno3">3</span>
                <span class="rno" id="rno5">5</span>
                <span class="rno" id="rno10">10</span>
                <span class="rno" id="rno15">15</span>
                <span class="rno" id="rno20">20</span>
                <span class="rno" id="rno25">25</span>
                <span class="rno" id="rno30">30</span>
                <span class="rno" id="rno35">35</span>
                <span class="rno" id="rno40">40</span>
                <span class="rno" id="rno45">45</span>
                <span class="rno" id="rno50">50</span>
                <span class="rno" id="rno55">55</span>
                <span class="rno" id="rno60">60</span>
                <span class="rno" id="rno65">65</span>
                <span class="rno" id="rno70">70</span>
                <span class="rno" id="rno75">75</span>
                <span class="rno" id="rno80">80</span>
                <span class="rno" id="rno85">85</span>
                <span class="rno" id="rno90">90</span>
                <span class="rno" id="rno95">95</span>
                <span class="rno" id="rno100">100</span>
              </div>
            </div>
              
            <div class="tab-content" id="myTabContent">
              <div class="tab-pane hidden" id="monthly-tab-panel" tabindex="0">
                <div class="signature_layot">
                  <input type="radio" name="plan_id" id="plan_id2" data-section="monthly" class="d-none imgbgchk" value="2" required="required" %%DEFINE_plan_selplan2%%>
                    <label for="plan_id2" class="changeprice" data-price="20">
                    <div class="order_details_box border-price">
                      <h6>Pro Plan <span class="offper_box"><span>Change to yearly, save 20%</span></span> <b>$<span class="month_proprice cprice">15</span>/mo </b></h6>
                      <div class="text_price">
                        <span class="no_employee_qarter">5</span> Signature <div class="monthprice" style="display:none;">$<span class="month_propricespl cpricespl">60</span> USD </div>
                      </div>
                      <ul>
                      <li><b>Interactive Signature</b></li>
                      <li>AI - Logo Animation™</li>
                      <li>Remove CES Watermark</li>
                      <li>Team Dashboard</sup></li>
                      <li>Interactive Social Icons</li>
                      <li>Animated Profile</li>
                      
                      </ul>
                      <ul>
                      <li>Verification Badge<img src="%%DEFINE_IMAGE_LINK%%/images/verification-badge1.svg" alt=""></li>
                      <li>Pro Templates</li>
                      <li>Team Dashboard</li>
                      <li>Outlook and Gmail Sync<img src="%%DEFINE_IMAGE_LINK%%/images/gmail-icon1.svg" alt=""><img src="%%DEFINE_IMAGE_LINK%%/images/outlook-icon1.svg" alt=""></li>
                      <li class="right">Instant Load Speed</li>
                      </ul>
                    </div>
                    <div class="tick_container">
                      <div class="tick">
                        <img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt="">
                      </div>
                    </div>
                  </label>
                </div>
              </div>
              <div class="tab-pane" id="yearly-tab-panel" tabindex="0">
                <div class="signature_layot">
                  <input type="radio" name="plan_id" id="plan_id4" data-section="yearly" class="d-none imgbgchk" value="4" required="required" %%DEFINE_plan_selplan4%%>
                  <label for="plan_id4" class="changeprice" data-price="20">
                    <div class="order_details_box border-price">
                      <h6>Pro Plan</h6>
                      <div class="text_price">
                        <span class="no_employee_qarter">5</span> Signature <div class="yearprice" style="display:none;">$<span class="year_propricespl cpricespl">60</span> USD </div>
                      </div>
                      <span>14-Day Risk-Free Guarantee</span>
                      <span>$<div style="text-decoration:line-through;" class="year_propricespl">30</div>
                      <b>$<span class="year_proprice cprice">15</span> /mo </b>
                      <span>Billed Annualy</span>
                      <span>Full animation features with advanced layouts, interactive icons, team management and auto-deployment.</span>
                      <ul>
                        <li>Interactive Signature</li>
                        <li>AI - Logo Animation™</li>
                        <li>Remove CES Watermark</li>
                        <li>Team Dashboard</sup></li>
                        <li>Interactive Social Icons</li>
                        <li>Animated Profile</li>
                      </ul>
                      <ul>
                        <li>Verification Badge<img src="%%DEFINE_IMAGE_LINK%%/images/verification-badge1.svg" alt=""></li>
                        <li>Pro Templates</li>
                        <li>Team Dashboard</li>
                        <li>Outlook and Gmail Sync<img src="%%DEFINE_IMAGE_LINK%%/images/gmail-icon1.svg" alt=""><img src="%%DEFINE_IMAGE_LINK%%/images/outlook-icon1.svg" alt=""></li>
                        <li class="right">Instant Load Speed</li>
                      </ul>
                    </div>
                  </label>
                </div>  
              </div>
            </div>
          
          </div>
        <div class="dashboard_set_up_bg">
          <h3>Renew Account</h3>
          <div class="sign_in_button"> 
            <!--<a href="#"><img class="google_but" src="%%DEFINE_IMAGE_LINK%%/images/signin-google-but.svg" alt=""></a>--> 
            <!-- GOGLE LOGIN BUTTON --> 
            <!-- <div id="g_id_onload" data-client_id="304186691480-b8hdvnn7dg42re813mcqiu201lilbrhf.apps.googleusercontent.com" data-context="signup" data-ux_mode="popup"data-callback="handleCredentialResponse" data-auto_prompt="false"></div>
                    <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline" data-text="signup_with" data-size="large" data-logo_alignment="center" data-width=100%></div> --> 
            <!-- GOGLE LOGIN BUTTON --> 
            <!-- <div class="or_border"><span>or</span></div> --> 
          </div>
          <div class="form-floating">
            <input type="email" class="form-control" value="%%DEFINE_RENEW_PAYMENT_USER_EMAIL%%" id="user_email" placeholder="Enter Email" disabled>
            <label for="">Enter Email</label>
          </div>
          
          <div class="form-floating">
            <input type="text" class="form-control" value="%%DEFINE_RENEW_PAYMENT_USER_NAME%%" id="user_name" placeholder="Full Name" disabled>
            <label for="">Full Name</label>
          </div>
          <div class="form-floating hidden">
            <input type="text" class="form-control" value="%%DEFINE_RENEW_PAYMENT_USER_ID%%" id="user_id" placeholder="User ID" disabled>
            <label for="">User ID</label>
          </div>
          <h3>Payment Method</h3>
          <span>Use saved payment details <input type="checkbox" name="user_payment" id="user_payment" checked></span>
          <div class="saved_card_section">
            <input type="hidden" name="user_saved_card" id="user_saved_card">
          </div>
          <div id="card_section" style="display: none;">
            <div class="form-floating">
              <input type="text" class="form-control" name="user_nameoncard" value="%%DEFINE_user_nameoncard%%" id="card_name" placeholder="Name on Card">
              <label for="">Name on Card</label>
            </div>
            <div id="paymentResponse"></div>
            <div class="form-floating card_info">
              <div id="card-element"></div>
              <label for="">Card Number *</label>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="dashboard_set_up_bg" id="order-main">
          <h3>Order Summary</h3>
          <div class="form-floating">
            <input type="text" id="promo_code" class="form-control" id="" placeholder="">
            <input type="hidden" id="coupon_id" name="coupon_id" value="" />
            <label for="">Discount Code</label>
            <button type="button" class="btn applied" id="apply_promocode" style="background:linear-gradient(270deg, #00CCFF 0%, #1D4AFE 100%); color:#FFF; border-radius: 5px;">APPLY NOW</button>
            <button type="button" class="btn applied d-none" id="applied_promocode"><img src="%%DEFINE_IMAGE_LINK%%/images/trash-icon.svg" alt=""> REMOVE</button>
          </div>
          <p class="special_offet" id="couponResponse"></p>
          <div class="order_summary_box">
            <h6>Order Summary</h6>
            <p>Subtotal <span id="subtotal">%%DEFINE_plan_format_pricespl%% USD</span></p>
            <p>Discount <span id="discount">$0 USD</span></p>
             <p style="color:green;">Total Savings <span id="savings" style="color:green;">%%DEFINE_plan_format_savings%% USD</span></p>
            <p>Total %%DEFINE_freetrialtext%% <span class="total" id="total">%%DEFINE_plan_format_price%% USD</span></p>


            <input type="hidden" name="totalpay" id="totalpay" value="%%DEFINE_plan_price_hiden%%"  />
          </div>
          
          <div class="back_button_bottom"> <a href="#">Back</a>
            <input type="hidden" name="registersubmit" value="1" />

              <button type="submit" name="signin" class="btn btn-primary" id="renew_button">Renew Account <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""></button>
          </div>
        </div>
        
        
      </div>
    </div>
  </form>
   <input type="hidden" id="ajax_url" value="%%DEFINE_linkModuleRegister%%" />
</div>

<!-- pricing plan change based on slider -->
<script src="%%DEFINE_JS_LINK%%/jquery-3.5.1.min.js"></script>         
<link href="%%DEFINE_JS_LINK%%/nouislider/nouislider.min.css" rel="stylesheet">
<script src="%%DEFINE_JS_LINK%%/nouislider/nouislider.min.js"></script>
<script>
  $(document).ready(function() {
    setTimeout(function(){ $('.alert').remove(); }, 3000);
    // Listen for changes on the checkbox
    $('#user_payment').change(function() {
      if ($(this).is(':checked')) {
        $('#card_section').slideUp();    // Hide with animation
      } else {
        $('#card_section').slideDown();  // Show with animation
      }
    });
  });
</script>
<script type="text/javascript">
jQuery.noConflict();
  (function($) {
    if ($('input[name="plan_id"]:checked').length === 0) {
      $("#yearly-tab-panel").removeClass('hidden');
      $("#monthly-tab-panel").addClass('hidden');
      $("#plan_id4").prop('checked', true);
      $("#form_plan_id").val(8);
    }else{
      if($('input[name="plan_id"]:checked').data('section') == 'monthly'){
        $('#plan_type').prop('checked', false);
        $("#monthly-tab-panel").removeClass('hidden');
        $("#yearly-tab-panel").addClass('hidden');
        $("#plan_id2").prop('checked', true);
        $("#form_plan_id").val(7);
      }else{
        $('#plan_type').prop('checked', true);
        $("#yearly-tab-panel").removeClass('hidden');
        $("#monthly-tab-panel").addClass('hidden');
        $("#plan_id4").prop('checked', true);
        $("#form_plan_id").val(8);
      }
    }
    $(document).ready(function(){
      $('#plan_type').on('change', function() {
        if ($(this).is(':checked')) {
          $("#yearly-tab-panel").removeClass('hidden');
          $("#monthly-tab-panel").addClass('hidden');
          $("#plan_id4").prop('checked', true);
          $("#form_plan_id").val(8);
        } else {
          $("#month-tab").click();
          $("#monthly-tab-panel").removeClass('hidden');
          $("#yearly-tab-panel").addClass('hidden');
          $("#plan_id2").prop('checked', true);
          $("#form_plan_id").val(7);
        }
        updateSelectPlan();
    });
    });
  })(jQuery);
</script>
<script>
  var quartlyEnabled = %%DEFINE_quartrly_enabled%%;
  function updateSelectPlan(){
    
    // if(isFreeTrial){
    //   return false;
    // }
    if(quartlyEnabled){
      $("#nav-tabs-monthly").text("Quarterly");
    }
    if($('input[name=plan_id]:checked').val() < 3){
      multiplyprice = 1;
      if(quartlyEnabled){
        multiplyprice = 3;
      }
    }else{
      multiplyprice = 12;
    }
    var radioObj = $('input[name=plan_id]:checked');
    planpriceint = parseFloat(radioObj.parent().find('label span.cprice').text() * multiplyprice);
    planpricesplint = parseFloat(radioObj.parent().find('label span.cpricespl').text() * multiplyprice);
    totalsavings = parseFloat(planpricesplint - planpriceint);  
    $('#subtotal').text('$'+planpricesplint.toFixed(2)+' USD');
    $('#savings').text('$'+totalsavings.toFixed(2)+' USD');
    $('#total').text('$'+planpriceint.toFixed(2)+' USD'); 
    // $('#selectplan-main').toggle();
    // $('#order-main').toggle();
    //for discount calcultion
    $('#totalpay').val(planpriceint);
    
    $('#coupon_id').val('');
    $('#promo_code').val('');
    $('#couponResponse').text('');
    $('#discount').text('$0.00 USD');
    $("#apply_promocode").removeClass('d-none');
    $("#applied_promocode").addClass('d-none');
  };

  
  start = $('#plan_unit').val();
  var rangeSlider = $('#range')[0];
    noUiSlider.create(rangeSlider, {
      start: [start],
      behaviour: 'tap', //drag
      step: 5,
      connect: [true, false],
      range: {
        'min': [1],
        '4%': [3, 2],
        '7%': [5, 5],
        'max': [100]
      }
    });
  
  rangeSlider.noUiSlider.on('update', function( values, handle,unencoded ) {
     //if(unencoded == 0 ) {unencoded = $('#plan_unit').val();}
    //  if(unencoded == 0 ) {unencoded = 1;}
    //  if( unencoded == '39.99999999999999') { unencoded = 40;}
    //  if( unencoded == '74') { unencoded = 75;}
    //  unencoded = unencoded.slice(0, 2);
    unencoded = values;
    unencoded = parseInt(unencoded);
     if(unencoded == 0 ) {unencoded = [1];}
     $("#form_plan_unit").val(unencoded);
    
     $('#plan_unit').val(unencoded);
     $('.no_employee_qarter').text(unencoded);
    // month price changhe
     var pro_month_unit = JSON.parse('%%DEFINE_pro_month_unit%%');
     var pro_month_unitspl = JSON.parse('%%DEFINE_pro_month_unitspl%%');
     $('.month_proprice').text(pro_month_unit[unencoded]);
     $('.month_propricespl').text(pro_month_unitspl[unencoded]);
    // year price changhe
     var pro_year_unit = JSON.parse('%%DEFINE_pro_year_unit%%');
     var pro_year_unitspl = JSON.parse('%%DEFINE_pro_year_unitspl%%');
     $('.year_proprice').text(pro_year_unit[unencoded]);
     $('.year_propricespl').text(pro_year_unitspl[unencoded]);
     var radioObj = $('input[name=plan_id]:checked');
     if($('input[name=plan_id]:checked').val() < 3){
      multiplyprice = 1;
      if(quartlyEnabled){
        multiplyprice = 3;
      }
     }else{
      multiplyprice = 12;
     }
     planpriceint = parseFloat(radioObj.parent().find('label span.cprice').text() * multiplyprice);
   
     $(".rno").removeClass("active");
     $("#rno"+unencoded).addClass("active");

     updateSelectPlan();
  });
  
 $(document).ready(function() {
    $("input[name$='plan_type']").click(function() {
        var tab = $(this).val();
		if(tab == 'quarter'){
			$('#plan_id2').prop('checked', true);
			$('#tab_quarter').css('display','inline');
			$('#tab_year').css('display','none');
			$('.yearly_save').removeClass('d-none');
		}else{
			$('#plan_id4').prop('checked', true);
			$('#tab_quarter').css('display','none');
			$('#tab_year').css('display','inline');
				$('.yearly_save').addClass('d-none');
		}
    });
});

// chek plan coupon is valid

$(document).ready(function(){
	$("#apply_promocode").click(function(){
		$('#paymentResponse').html('');
		$('#coupon_id').val('');
		var promo_code = $('#promo_code');
		if(promo_code.val() == ""){
			promo_code.focus(); return false;
		}else{
			var url = $('#ajax_url').val();
			jQuery.ajax({
			url: url,
			data:'coupon_apply=1&coupon_code='+promo_code.val(),
			type: "POST",
			dataType:"json",
			async: false,
			success:function(data){
				if(data['coupon_id'] !=0){
					$('#coupon_id').val(data['coupon_id']);
					
					totalValue = $('#totalpay').val();
					if(data['coupon_type'] == 'per'){
						discount =  ((totalValue * data['coupon_amount']) / 100).toFixed(2);
						totalpay = (totalValue - discount).toFixed(2);
					}else{
						discount =  (data['coupon_amount']).toFixed(2);
						totalpay = (totalValue - discount).toFixed(2);
					}
					$('#discount').text('$'+discount+' USD');
					$('#total').text('$'+totalpay+' USD');
					$("#apply_promocode").addClass('d-none');
					$("#applied_promocode").removeClass('d-none');
				}
				$('#couponResponse').html(data['msg']);
			},
			error:function (){ 
				clearconsole(); 
			}
			});
		}
	});
	
	$("#applied_promocode").click(function(){
		$('#coupon_id').val('');
		$('#promo_code').val('');
		totalPay = $('#totalpay').val();
		totalPay = parseFloat(totalPay).toFixed(2);
		$('#discount').text('$0 USD');	
		$('#total').text('$'+totalPay+' USD');
		$('#couponResponse').html('<span style="color:#F00;">Discount code removed!</span>');
		$("#apply_promocode").removeClass('d-none');
		$("#applied_promocode").addClass('d-none');
	}) 
});  

</script>
<!-- end pricing plan change based on slider -->	


<script>
// Create an instance of the Stripe object
// Set your publishable API key
var stripe = Stripe('%%DEFINE_STRIPE_PUBLISHABLE_KEY%%');

// Create an instance of elements
var elements = stripe.elements();
    var style = {
      base: {
        color: "#32325d",
        fontFamily: 'Roboto, sans-serif',
        fontSmoothing: "antialiased",
        fontSize: "13px",
        "::placeholder": {
          color: "#32325d"
        }
      },
      invalid: {
        fontFamily: 'Arial, sans-serif',
        color: "#fa755a",
        iconColor: "#fa755a"
      }
    };

    var cardElement = elements.create("card", { 	hidePostalCode: true, style: style });
    // Stripe injects an iframe into the DOM
    cardElement.mount("#card-element");

// Validate input of the card elements
var resultContainer = document.getElementById('paymentResponse');
cardElement.addEventListener('change', function(event) {
    if (event.error) {
        resultContainer.innerHTML = '<p style="color:#F00;">'+event.error.message+'</p>';
    } else {
        resultContainer.innerHTML = '';
    }
});
// Get payment form element
var form = document.getElementById('registerForm');

// Create a token when the form is submitted.
form.addEventListener('submit', function(e) {
  $("#renew_button").prop('disabled', true);
  $("#renew_button").html('Processing...');
  $("#renew_button").addClass('spinner');
  // $('button[name=signin]').attr('disabled',true);
  e.preventDefault();
  if($("#user_payment").is(':checked')){
    var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'useSavedCard');
    hiddenInput.setAttribute('value', true);
    form.appendChild(hiddenInput);
    form.submit();
  }else{
    createToken();
  }
	return false;
});

// Create single-use token to charge the user
function createToken() {
  var card_name = document.getElementById('card_name').value;
    stripe.createToken(cardElement,{name: card_name}).then(function(result) {
      if (result.error) {
        // Inform the user if there was an error
        // $('button[name=signin]').attr('disabled',false);
        $("#renew_button").prop('disabled', false);
        $("#renew_button").html('Renew Account <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt="">');
        $("#renew_button").removeClass('spinner');
        resultContainer.innerHTML = '<p style="color:#F00;">'+result.error.message+'</p>';
      } else {
        // Send the token to your server
        stripeTokenHandler(result.token);
      }
    });
}

// Callback to handle the response from stripe
function stripeTokenHandler(token) {
    // Insert the token ID into the form so it gets submitted to the server
    var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'stripeToken');
    hiddenInput.setAttribute('value', token.id);
    form.appendChild(hiddenInput);
    // Submit the form
    form.submit();
}
</script> 
<script>
  function handleCredentialResponse(response) {
     // decodeJwtResponse() is a custom function defined by you
     // to decode the credential response.
    var responsePayload = parseJwt(response.credential);
	// console.log(responsePayload.email_verified);
	document.getElementById('user_firstname').value = responsePayload.given_name+' '+responsePayload.family_name;
	//document.getElementById('user_lastname').value = responsePayload.family_name;
	document.getElementById('user_email').value = responsePayload.email;
	document.getElementById("passField").style.display = "none"; 
	document.getElementById("user_password").value ='google';
	
	var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'user_googleid');
    hiddenInput.setAttribute('value', responsePayload.sub);
    form.appendChild(hiddenInput);
	
	var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'user_image');
    hiddenInput.setAttribute('value', responsePayload.picture);
    form.appendChild(hiddenInput);
	
  }
  
  function parseJwt (token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
};
</script>


%%DEFINE_FOOTER%%