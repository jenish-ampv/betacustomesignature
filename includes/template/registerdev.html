%%DEFINE_HEADER%%
<style>
  .header_bg .icon_right_side a.tutorial{ display: none;}
</style>
<section>
<script src="https://accounts.google.com/gsi/client" async defer></script> 
<script src="https://js.stripe.com/v3/"></script>
<div class="container">
  <form action="" id="registerForm" method="post">
    <div class="row"> %%DEFINE_Message%%
      <div class="col-md-6 col-12">
        <div class="dashboard_set_up_bg">
          <h3>Sign up</h3>
          <div class="sign_in_button"> 
            <!--<a href="#"><img class="google_but" src="%%DEFINE_IMAGE_LINK%%/images/signin-google-but.svg" alt=""></a>--> 
            <!-- GOGLE LOGIN BUTTON --> 
            <!-- <div id="g_id_onload" data-client_id="304186691480-b8hdvnn7dg42re813mcqiu201lilbrhf.apps.googleusercontent.com" data-context="signup" data-ux_mode="popup"data-callback="handleCredentialResponse" data-auto_prompt="false"></div>
                    <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline" data-text="signup_with" data-size="large" data-logo_alignment="center" data-width=100%></div> --> 
            <!-- GOGLE LOGIN BUTTON --> 
            <!-- <div class="or_border"><span>or</span></div> --> 
          </div>
          <div class="form-floating">
            <input type="email" name="user_email" value="%%DEFINE_user_email%%" class="form-control" id="user_email" placeholder="Enter Email" required="required">
            <label for="">Enter Email</label>
          </div>
          <div class="form-floating" id="passField">
            <input type="password" class="form-control"  name="user_password" id="user_password" value="%%DEFINE_user_password%%" placeholder="Password" required="required">
            <label for="">Enter Password</label>
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" name="user_firstname" value="%%DEFINE_user_firstname%%" id="user_firstname" placeholder="First Name">
            <label for="">Full Name</label>
            <input type="hidden" name="user_lastname" value="">
          </div>
          <div class="form-floating">
            <input type="text" class="form-control" name="user_organization" value="%%DEFINE_user_organization%%" id="user_organization" placeholder="Organization">
            <label for="">Organization</label>
          </div>
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" name="user_term" id="user_term" required="required">
            <label class="form-check-label" for="user_term">By signup you agree to <a href="https://customesignature.com/terms-of-use" target="_blank">Terms & Conditions</a></label>
          </div>
          <h3>Payment Method</h3>
          <div class="form-floating">
            <input type="text" class="form-control" name="user_nameoncard" value="%%DEFINE_user_nameoncard%%" id="card_name" placeholder="Name on Card">
            <label for="">Name on Card</label>
          </div>
          <div id="paymentResponse"></div>
          <div class="form-floating card_info">
            <div id="card-element"></div>
            <label for="">Card Number *</label>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-12">
        <div class="dashboard_set_up_bg" id="order-main">
          <h3>Order Summary</h3>
          <div class="order_details_box">
            <div class="text">
              <p>Selected Plan</p>
            </div>
            <div class="text">
              <div class="yearly_save %%DEFINE_save_year_label%%">Change to Yearly <span>Save +25%</span></div>
              <p><a href="javascript:void(0);" id="changeplan" >Change Plan</a></p>
            </div>
          </div>
          <div id="selected-plan">
            	%%DEFINE_selected_plan%%
          </div>
          <div class="form-floating">
            <input type="text" id="promo_code" class="form-control" id="" placeholder="">
            <input type="hidden" id="coupon_id" name="coupon_id" value="" />
            <label for="">Discount Code</label>
            <button type="button" class="btn applied" id="apply_promocode" style="background:linear-gradient(270deg, #00CCFF 0%, #1D4AFE 100%); color:#FFF;">APPLLY NOW</button>
            <button type="button" class="btn applied hidden" id="applied_promocode"><img src="%%DEFINE_IMAGE_LINK%%/images/trash-icon.svg" alt=""> REMOVE</button>
          </div>
          <p class="special_offet" id="couponResponse"></p>
          <div class="order_summary_box">
            <h6>Order Summary</h6>
            <p>Subtotal <span id="subtotal">%%DEFINE_plan_format_pricespl%% USD</span></p>
            <p>Discount <span id="discount">$0 USD</span></p>
             <p style="color:green;">Total Savings <span id="savings" style="color:green;">%%DEFINE_plan_format_savings%% USD</span></p>
            <p>Total <span class="total" id="total">%%DEFINE_plan_format_price%% USD</span></p>
            <input type="hidden" name="totalpay" id="totalpay" value="%%DEFINE_plan_price_hiden%%"  />
          </div>
          <div class="back_button_bottom"> <a href="#">Back</a>
            <input type="hidden" name="registersubmit" value="1" />
            <button type="submit" name="signin" class="btn btn-primary">Place Order <img src="%%DEFINE_IMAGE_LINK%%/images/arrow-right.svg" alt=""></button>
          </div>
        </div>
        
        <!-------- SELECT PLAN --------------->
        <div class="dashboard_set_up_bg" id="selectplan-main" style="display:none;">
          <div class="select_plan_title">Select Plan 
           	<div class="form-check form-check-inline">
              <input class="form-check-input period" type="radio" name="plan_type" id="plan_type2" value="year" checked>
              <label class="form-check-label" for="plan_type2">Yearly</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input period" type="radio" name="plan_type" id="plan_type1" value="quarter">
              <label class="form-check-label" for="plan_type1">Quarterly</label>
           </div>
		  <div class="year_savemore"><b>Save 25%</b></span>
		  </div>
          
          <div class="no_of_signatures">
          
          	<p>No. of Signatures</p>
            <h6><span class="no_employee_qarter">5</span> Signatures</h6>
            <input type="hidden" id="plan_unit" name="plan_unit" value="%%DEFINE_plan_selunit%%" />
          </div>
          <div class="range_slider">
         	 <div id="range"  class="noUi-target noUi-ltr noUi-horizontal"></div>
          	 <div class="range_text">
              <span class="rno active" id="rno1">1</span>
                <span class="rno" id="rno5">5</span>
                <span class="rno" id="rno10">10</span>
                <span class="rno" id="rno15">15</span>
                <span class="rno" id="rno20">20</span>
                <span class="rno" id="rno25">25</span>
                <span class="rno" id="rno30">30</span>
                <span class="rno" id="rno35">35</span>
                <span class="rno" id="rno40">40</span>
                <span class="rno" id="rno45">45</span>
                <span class="rno" id="rno50">50</span>
             </div>
     	  </div>
          <div id="tab_quarter" style="display:none;">
          <div class="signature_layot">
          		<input type="radio" name="plan_id" id="plan_id1" class="hidden imgbgchk" value="1" required="required" %%DEFINE_plan_selplan1%%>
                <label for="plan_id1" class="changeprice" data-price="20">
          <div class="order_details_box border-price">
          	 <h6>Baisc (Quarterly) <b><span class="offper">15% OFF</span>$<span class="quarter_basicprice cprice">10</span> /mo</b></h6>  
             <div class="text_price"><span class="no_employee_qarter">5</span> Signature <div class="monthprice">$<span class="quarter_basicpricespl cpricespl">45</span> USD</div></div>    
             <ul>
             <li>Basic Logo Animation</li>
             <li>Static Icons</li>
             <li>Basic Layouts</li>
             <li>5 Day logo turnaround</li>
             </ul>
          </div>
          <div class="tick_container"><div class="tick"><img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt=""></div></div></label>
          </div>  
          
           <div class="signature_layot">
               <input type="radio" name="plan_id" id="plan_id2" class="hidden imgbgchk" value="2" required="required" %%DEFINE_plan_selplan2%%>
               <label for="plan_id2" class="changeprice" data-price="20">
          <div class="order_details_box border-price">
          	 <h6>Pro (Quarterly)<b><span class="offper">50% OFF</span>$<span class="quarter_proprice cprice">15</span> /mo</b></h6>  
             <div class="text_price"><span class="no_employee_qarter">5</span> Signature <div class="monthprice">$<span class="quarter_propricespl cpricespl">60</span> USD</div></div>    
             <ul>
             <li>Advanced Logo Animation</li>
             <li>Animated Icons</li>
             <li>Pro Layouts</li>
              <li>2 Day logo turnaround</li>
             </ul>  
          </div>
           <div class="tick_container"><div class="tick"><img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt=""></div></div></label>
          </div>  
         </div>
         
          <!-- year  Plan -->
          
        <div id="tab_year">
          <div class="signature_layot">
               <input type="radio" name="plan_id" id="plan_id3" class="hidden imgbgchk" value="3" required="required" %%DEFINE_plan_selplan3%%>
               <label for="plan_id3" class="changeprice" data-price="20">
          <div class="order_details_box border-price">
          	 <h6>Basic (Yearly)<b><span class="offper">15% OFF</span>$<span class="year_basicprice cprice">10</span> /mo</b></h6>  
              <div class="text_price"><span class="no_employee_qarter">5</span> Signature <div class="monthprice">$<span class="year_basicpricespl cpricespl">60</span> USD</div></div>    
             <ul>
             <li>Basic Logo Animation</li>
             <li>Static Icons</li>
             <li>Basic Layouts</li>
             <li>5 Day logo turnaround</li>
             </ul>  
          </div>
           <div class="tick_container"><div class="tick"><img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt=""></div></div></label>
          </div>  
          
          <div class="signature_layot">
               <input type="radio" name="plan_id" id="plan_id4" class="hidden imgbgchk" value="4" required="required" %%DEFINE_plan_selplan4%%>
               <label for="plan_id4" class="changeprice" data-price="20">
          <div class="order_details_box border-price">
          	 <h6>Pro (Yearly)<b><span class="offper">50% OFF</span>$<span class="year_proprice cprice">15</span> /mo</b></h6>  
             <div class="text_price"><span class="no_employee_qarter">5</span> Signature <div class="monthprice">$<span class="year_propricespl cpricespl">60</span> USD</div></div>    
             <ul>
               <li>Advanced Logo Animation</li>
             <li>Animated Icons</li>
             <li>Pro Layouts</li>
              <li>2 Day logo turnaround</li>
             </ul>  
          </div>
           <div class="tick_container"><div class="tick"><img src="%%DEFINE_IMAGE_LINK%%/images/right-icon.png" alt=""></div></div></label>
          </div>  
        </div>
          
          
          
          <div class="back_button_bottom" style="justify-content: center;">
            <button type="button" id="selectplan" class="btn btn-primary">Select</button>
          </div>
        </div>
      </div>
    </div>
  </form>
   <input type="hidden" id="ajax_url" value="%%DEFINE_linkModuleRegister%%" />
</div>

<!-- pricing plan change based on slider -->
<script src="%%DEFINE_JS_LINK%%/jquery-3.5.1.min.js"></script>         
<link href="%%DEFINE_JS_LINK%%/nouislider/nouislider.min.css" rel="stylesheet">
<script src="%%DEFINE_JS_LINK%%/nouislider/nouislider.min.js"></script>
<script>
start = $('#plan_unit').val();
var rangeSlider = $('#range')[0];
	noUiSlider.create(rangeSlider, {
		start: [start],
		behaviour: 'tap', //drag
		step: 5,
		connect: [true, false],
		range: {
			'min': [0],
			'max': [50]
		}
	});
	
  rangeSlider.noUiSlider.on('update', function( values, handle,unencoded ) {
	   if(unencoded == 0 ) {unencoded = $('#plan_unit').val();}
	   if( unencoded == '39.99999999999999') { unencoded = 40;}
	   $('#plan_unit').val(unencoded);
	   $('.no_employee_qarter').text(unencoded);
	 // quarter price changhe
		 var basic_quarter_unit = JSON.parse('%%DEFINE_basic_quarter_unit%%');
		 var pro_quarter_unit = JSON.parse('%%DEFINE_pro_quarter_unit%%');
		 var basic_quarter_unitspl = JSON.parse('%%DEFINE_basic_quarter_unitspl%%');
		 var pro_quarter_unitspl = JSON.parse('%%DEFINE_pro_quarter_unitspl%%');
		 $('.quarter_basicprice').text(basic_quarter_unit[unencoded]);
		 $('.quarter_proprice').text(pro_quarter_unit[unencoded]);
		  $('.quarter_basicpricespl').text(basic_quarter_unitspl[unencoded]);
		 $('.quarter_propricespl').text(pro_quarter_unitspl[unencoded]);
	 
	  // year price changhe
		 var basic_year_unit = JSON.parse('%%DEFINE_basic_year_unit%%');
		 var pro_year_unit = JSON.parse('%%DEFINE_pro_year_unit%%');
		  var basic_year_unitspl = JSON.parse('%%DEFINE_basic_year_unitspl%%');
		 var pro_year_unitspl = JSON.parse('%%DEFINE_pro_year_unitspl%%');
		 $('.year_basicprice').text(basic_year_unit[unencoded]);
		 $('.year_proprice').text(pro_year_unit[unencoded]);
		  $('.year_basicpricespl').text(basic_year_unitspl[unencoded]);
		 $('.year_propricespl').text(pro_year_unitspl[unencoded]);
		 
		// month
		// var basic_month_unit = JSON.parse('%%DEFINE_basic_month_unit%%');
       //  var pro_month_unit = JSON.parse('%%DEFINE_pro_month_unit%%');
	 	// $('.month_basicprice').text(basic_month_unit[unencoded]);
		// $('.month_proprice').text(pro_month_unit[unencoded]);
	 
     $(".rno").removeClass("active");
     $("#rno"+unencoded).addClass("active");

  });
  
 $(document).ready(function() {
    $("input[name$='plan_type']").click(function() {
        var tab = $(this).val();
		if(tab == 'quarter'){
			$('#plan_id1').prop('checked', true);
			$('#tab_quarter').css('display','inline');
			$('#tab_year').css('display','none');
			$('.yearly_save').removeClass('hidden');
		}else{
			$('#plan_id3').prop('checked', true);
			$('#tab_quarter').css('display','none');
			$('#tab_year').css('display','inline');
				$('.yearly_save').addClass('hidden');
		}
    });
});

// chek plan coupon is valid

$(document).ready(function(){
	$("#apply_promocode").click(function(){
		$('#paymentResponse').html('');
		$('#coupon_id').val('');
		var promo_code = $('#promo_code');
		if(promo_code.val() == ""){
			promo_code.focus(); return false;
		}else{
			var url = $('#ajax_url').val();
			jQuery.ajax({
			url: url,
			data:'coupon_apply=1&coupon_code='+promo_code.val(),
			type: "POST",
			dataType:"json",
			async: false,
			success:function(data){
				if(data['coupon_id'] !=0){
					$('#coupon_id').val(data['coupon_id']);
					
					totalValue = $('#totalpay').val();
					if(data['coupon_type'] == 'per'){
						discount =  ((totalValue * data['coupon_amount']) / 100).toFixed(2);
						totalpay = (totalValue - discount).toFixed(2);
					}else{
						discount =  (data['coupon_amount']).toFixed(2);
						totalpay = (totalValue - discount).toFixed(2);
					}
					$('#discount').text('$'+discount+' USD');
					$('#total').text('$'+totalpay+' USD');
					$("#apply_promocode").addClass('hidden');
					$("#applied_promocode").removeClass('hidden');
				}
				$('#couponResponse').html(data['msg']);
			},
			error:function (){ 
				clearconsole(); 
			}
			});
		}
	});
	
	$("#applied_promocode").click(function(){
		$('#coupon_id').val('');
		$('#promo_code').val('');
		totalPay = $('#totalpay').val();
		totalPay = parseFloat(totalPay).toFixed(2);
		$('#discount').text('$0 USD');	
		$('#total').text('$'+totalPay+' USD');
		$('#couponResponse').html('<span style="color:#F00;">Discount code removed!</span>');
		$("#apply_promocode").removeClass('hidden');
		$("#applied_promocode").addClass('hidden');
	}) 
});  

</script>
<!-- end pricing plan change based on slider -->	


<script>
// Create an instance of the Stripe object
// Set your publishable API key
var stripe = Stripe('%%DEFINE_STRIPE_PUBLISHABLE_KEY%%');

// Create an instance of elements
var elements = stripe.elements();
    var style = {
      base: {
        color: "#32325d",
        fontFamily: 'Roboto, sans-serif',
        fontSmoothing: "antialiased",
        fontSize: "13px",
        "::placeholder": {
          color: "#32325d"
        }
      },
      invalid: {
        fontFamily: 'Arial, sans-serif',
        color: "#fa755a",
        iconColor: "#fa755a"
      }
    };

    var cardElement = elements.create("card", { 	hidePostalCode: true, style: style });
    // Stripe injects an iframe into the DOM
    cardElement.mount("#card-element");

// Validate input of the card elements
var resultContainer = document.getElementById('paymentResponse');
cardElement.addEventListener('change', function(event) {
    if (event.error) {
        resultContainer.innerHTML = '<p style="color:#F00;">'+event.error.message+'</p>';
    } else {
        resultContainer.innerHTML = '';
    }
});
// Get payment form element
var form = document.getElementById('registerForm');

// Create a token when the form is submitted.
form.addEventListener('submit', function(e) {
    e.preventDefault();
    createToken();
	return false;
});

// Create single-use token to charge the user
function createToken() {
  var card_name = document.getElementById('card_name').value;
    stripe.createToken(cardElement,{name: card_name}).then(function(result) {
        if (result.error) {
            // Inform the user if there was an error
            resultContainer.innerHTML = '<p style="color:#F00;">'+result.error.message+'</p>';
        } else {
            // Send the token to your server
            stripeTokenHandler(result.token);
        }
    });
}

// Callback to handle the response from stripe
function stripeTokenHandler(token) {
    // Insert the token ID into the form so it gets submitted to the server
    var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'stripeToken');
    hiddenInput.setAttribute('value', token.id);
    form.appendChild(hiddenInput);
    // Submit the form
    form.submit();
}
</script> 
<script>
  function handleCredentialResponse(response) {
     // decodeJwtResponse() is a custom function defined by you
     // to decode the credential response.
    var responsePayload = parseJwt(response.credential);
	// console.log(responsePayload.email_verified);
	document.getElementById('user_firstname').value = responsePayload.given_name+' '+responsePayload.family_name;
	//document.getElementById('user_lastname').value = responsePayload.family_name;
	document.getElementById('user_email').value = responsePayload.email;
	document.getElementById("passField").style.display = "none"; 
	document.getElementById("user_password").value ='google';
	
	var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'user_googleid');
    hiddenInput.setAttribute('value', responsePayload.sub);
    form.appendChild(hiddenInput);
	
	var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'user_image');
    hiddenInput.setAttribute('value', responsePayload.picture);
    form.appendChild(hiddenInput);
	
  }
  
  function parseJwt (token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
};
</script> 

<script>
$(document).ready(function(){
	$('.changeprice').on( "click", function() {
		if($('input[name=plan_type]:checked').val() == 'quarter' && $('input[name=plan_id]:checked').val() < 3){
			multiplyprice = 3;
		}else{
			multiplyprice = 12;
		}
		planpriceint = parseFloat($(this).find('span.cprice').text() * multiplyprice);
		planpricesplint = parseFloat($(this).find('span.cpricespl').text() * multiplyprice);
		totalsavings = parseFloat(planpricesplint - planpriceint);
		$('#subtotal').text('$'+planpricesplint.toFixed(2)+' USD');
		$('#savings').text('$'+totalsavings.toFixed(2)+' USD');
		$('#total').text('$'+planpriceint.toFixed(2)+' USD'); 
		$('#totalpay').val(planpriceint);
		$(this).css('border-color','#00CCFF');
		var selectedplan = $(this).html();
		$('#selected-plan').html(selectedplan);
		
		$('#coupon_id').val('');
		$('#promo_code').val('');
		$('#couponResponse').text('');
		$('#discount').text('$0.00 USD');
		$("#apply_promocode").removeClass('hidden');
		$("#applied_promocode").addClass('hidden');
	});
	
	$('#selectplan').on( "click", function() {	
	
		if($('input[name=plan_type]:checked').val() == 'quarter' && $('input[name=plan_id]:checked').val() < 3){
			multiplyprice = 3;
		}else{
			multiplyprice = 12;
		}
		var radioObj = $('input[name=plan_id]:checked');
		planpriceint = parseFloat(radioObj.parent().find('label span.cprice').text() * multiplyprice);
		planpricesplint = parseFloat(radioObj.parent().find('label span.cpricespl').text() * multiplyprice);
		totalsavings = parseFloat(planpricesplint - planpriceint);	
		
		$('#subtotal').text('$'+planpricesplint.toFixed(2)+' USD');
		$('#savings').text('$'+totalsavings.toFixed(2)+' USD');
		$('#total').text('$'+planpriceint.toFixed(2)+' USD'); 
		var selectedplan = radioObj.parent().find('label').html();
		$('#selected-plan').html(selectedplan);
		$('#selectplan-main').toggle();
		$('#order-main').toggle();
		//for discount calcultion
		$('#totalpay').val(planpriceint);
		
		$('#coupon_id').val('');
		$('#promo_code').val('');
		$('#couponResponse').text('');
		$('#discount').text('$0.00 USD');
		$("#apply_promocode").removeClass('hidden');
		$("#applied_promocode").addClass('hidden');
	});
	$('#changeplan').on( "click", function() {		 
		$('#selectplan-main').toggle();
		$('#order-main').toggle();
	});
});
</script> 


%%DEFINE_FOOTER%%